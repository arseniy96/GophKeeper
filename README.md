# GophKeeper
Password manager

Сервис для хранения и обработки паролей

# Server

Имплементация сервера находится в папке cmd/server.
Представляет собой gRPC сервер на Go. 
Описание gRPC методов можно найти в папке src/proto

## Функции сервера

- Аутентификация – SignUp и SignIn
- Сохранение приватных данных, таких как:
    - Пароли
    - Карточные данные
    - Файлы
    - Текстовые данные
- Получение списка сохранённых данных
- Получение сохранённых данных
- Редактирование сохранённых данных

## Запуск сервера

Чтобы запустить сервер, необходимо выполнить команду

```
go run ./cmd/server/main.go
```

Приложение запускается со следующими переменными окружения:

```
DATABASE_DSN - dsn для доступа к СУБД
HOST - адрес, на котором будет доступен сервер
LOG_LEVEL - уровень логирования
```

# Client

Имплементация клиента находится в папке cmd/client.
Представляет собой gRPC сервер на Go.
Описание gRPC методов можно найти в папке src/proto

## Запуск приложения

Чтобы запустить клиент, необходимо выполнить команду

```
go run ./cmd/client/main.go
```

Приложение запускается со следующими переменными окружения:

```
CONNECTION_TIMEOUT - timeout обращения к серверу
HOST - адрес, на который будет обращаться клиент
LOG_LEVEL - уровень логирования
```

## Сценарии работы

При запуске приложение попросит авторизоваться, 
пользователь может либо создать новый аккаунт, либо воспользоваться ранее созданным.

Далее приложение выведет на экран все возможные функции:
- Получение списка сохранённых данных (мета информация)
- Получение сохранённых данных (непосредственно сами сохранённые данные)
- Сохранение данных на сервер
- Редактирование данных

Пользователю необходимо выбрать один из предложенных вариантов и ввести соответствующий номер команды.
После успешного выполнения команды, приложение опять предложит выбрать один из сценариев.

Далее рассмотрим все возможные команды

### Сохранение данных на сервер
Если пользователь выбрал команду сохранения данных, приложение попросит пользователя выбрать тип данных, которые он хочет сохранить.
Затем, в зависимости от типа данных, приложение предложен ввести необходимые данные и метаинформацию (name).
После этого клиент попытается сохранить данные на сервер. Если сервер будет не доступен, приложение завершится с ошибкой.

### Получение списка сохранённых данных
Если пользователь выбрал команду получения списка данных, приложение обратится на сервер за получением нужной информации.
Если сервер будет недоступен, приложение выдаст пользователю данные из кеша.

### Получение сохранённых данных
Если пользователь выбрал команду получения сохранённых данных, 
приложение в первую очередь предложит пользователю выбрать из списка, какие конкретно данные он хочет получить.
Далее пользователь должен ввести ID из списка. 
Приложение попробует достать данные из кеша, если это не удастся, приложение обратится на сервер.

### Редактирование данных
Если пользователь выбрал команду получения сохранённых данных,
приложение в первую очередь предложит пользователю выбрать из списка, какие конкретно данные он хочет отредактировать.
Затем, в зависимости от типа данных, приложение предложен ввести необходимые данные.

## Тестирование

### Синхронизация данных
Чтобы протестировать синхронизацию данных на нескольких клиентах и сервере, необходимо:
1. Запустить сервер
2. Запустить клиент1
3. Запустить клиент2
4. Авторизоваться под одним пользователем
5. На клиент1 сохранить какие-нибудь данные
6. На клиент2 попробовать получить эти данные
   - Приложение должно автоматически синхронизировать кеш и отдать данные из кеша
7. Также можно на клиент1 обновить имеющиеся данные и запросить эти данные на клиент2
   - Сервер обновит версию данных
   - Клиент2 синхронизирует эти данные и отдаст из обновлённого кеша


### Разрыв соединения
Чтобы протестировать разрыв соединения с сервером, необходимо:
1. Запустить сервер
2. Запустить клиент
3. Авторизоваться
4. Получить список данных (чтобы сохранить данные в кеш)
5. Стопнуть сервер
6. Попробовать запросить какие-либо данные через клиент
7. Клиент должен достать данные из кеша